# lazy-hsa Configuration
# Copy to config.yaml and fill in your values

# =============================================================================
# LLM Settings (Vision-enabled model for receipt extraction)
# =============================================================================
llm:
  # Provider: "ollama" or "vllm" (both use OpenAI-compatible API)
  provider: "ollama"

  # Model name (as shown in `ollama list` or vLLM)
  # Options:
  #   - mistral-small3 (14B, vision-capable, good balance)
  #   - gpt-oss:20b (20B, better JSON output for complex EOBs)
  #   - gpt-oss:120b (120B, highest accuracy, requires significant VRAM)
  # For DGX Spark or other dedicated inference servers, use larger models
  model: "mistral-small3"

  # API endpoint (localhost for privacy - your data never leaves your machine)
  # Ollama default: http://localhost:11434/v1
  # vLLM default: http://localhost:8000/v1
  api_base: "http://localhost:11434/v1"

  # Vision model for image-based extraction (scanned PDFs, photos)
  # Used when pdfplumber can't extract text and vision fallback is needed
  # Set to a vision-capable model if your primary model lacks vision
  # vision_model: "mistral-small3"

  # Vision-enabled model processes images directly (no separate OCR needed)
  # For multi-page PDFs, pdfplumber extracts text from all pages
  vision_enabled: true

  # Generation settings
  max_tokens: 2048
  temperature: 0.1  # Low for consistent extraction

# =============================================================================
# Google Drive Settings
# =============================================================================
google_drive:
  root_folder: "HSA_Receipts"
  credentials_file: "config/credentials/gdrive_credentials.json"
  token_file: "config/credentials/gdrive_token.json"

# =============================================================================
# Google Sheets Settings
# =============================================================================
google_sheets:
  spreadsheet_name: "HSA_Master_Index"
  worksheet_name: "Receipts"

# =============================================================================
# Email Accounts (Optional - for scanning medical emails)
# =============================================================================
email:
  primary:
    gmail:
      address: "your-email@gmail.com"
      # Uses OAuth, no password needed
    icloud:
      address: "your-email@icloud.com"
      app_password: "xxxx-xxxx-xxxx-xxxx"  # Generate at appleid.apple.com
      imap_server: "imap.mail.me.com"
  # Add more accounts as needed:
  # spouse:
  #   gmail:
  #     address: "spouse@gmail.com"

# =============================================================================
# Scanner Email Inbox (Optional - for receiving scanned receipts)
# =============================================================================
scanner:
  monitor_email: "your-receipts@gmail.com"
  gmail_label: "Scanner"

# =============================================================================
# Family Members (Names used for folder structure and patient matching)
# =============================================================================
family:
  - name: "Alice"
    role: "primary"      # HSA account holder
  - name: "Bob"
    role: "spouse"
  - name: "Charlie"
    role: "dependent"    # Children, etc.

# =============================================================================
# Provider Search Patterns (for email filtering)
# =============================================================================
providers:
  medical:
    - "sutter"
    - "sutterhealth"
    - "stanford"
    - "stanfordhealthcare"
    - "kaiser"
    - "aetna"
    - "cigna"
    - "unitedhealthcare"
    - "bluecross"
    - "anthem"
  dental:
    - "delta dental"
    - "deltadentalins"
    - "metlife dental"
  vision:
    - "vsp"
    - "visionserviceplan"
    - "eyemed"
  pharmacy:
    - "cvs"
    - "walgreens"
    - "express-scripts"
    - "expressscripts"
    - "caremark"
    - "optumrx"
  hsa_eligible_retail:
    - "amazon"
    - "fsa store"
    - "hsastore"
    - "costco"

# =============================================================================
# File Naming
# =============================================================================
file_naming:
  date_format: "%Y-%m-%d"
  template: "{date}_{provider}_{service_type}_${amount}"

# =============================================================================
# Processing Settings
# =============================================================================
processing:
  inbox_folder: "_Inbox"
  processing_folder: "_Processing"
  rejected_folder: "_Rejected"

  # Confidence thresholds
  auto_process_threshold: 0.85    # >= 85%: auto-process
  review_threshold: 0.70          # 70-84%: process but flag for review
  # < 70%: requires manual review

# =============================================================================
# HSA Settings
# =============================================================================
hsa:
  # IMPORTANT: Only expenses AFTER this date are HSA-eligible
  # Set this to when your HSA was established
  start_date: "2024-01-01"
  provider: "Fidelity"  # or "HSA Bank", "Lively", etc.
  oop_max: 6000  # Annual out-of-pocket maximum (family)

# =============================================================================
# Backup Settings (optional)
# =============================================================================
backup:
  enabled: false
  # local_path: "/path/to/backup"
  # Or use rsync to NAS
  # rsync_target: "user@nas:/backup/hsa-receipts"
